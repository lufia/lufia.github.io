<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Plan 9: 分散システムのインストール</title><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="author" content="http://www.hatena.ne.jp/lufiabb/"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/1b15737708df434c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1b15737708df434c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-c2e8b39087850489.js" defer=""></script><script src="/_next/static/chunks/main-7715c9ce3e92f40f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8e84d751e7e95936.js" defer=""></script><script src="/_next/static/chunks/245-02c6405e66663b10.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...slug%5D%5D-663c09fbf665935a.js" defer=""></script><script src="/_next/static/uudkrhSA2meQW-38gm1fk/_buildManifest.js" defer=""></script><script src="/_next/static/uudkrhSA2meQW-38gm1fk/_ssgManifest.js" defer=""></script></head><body><div id="__next">
<nav>
	<h1>メニュー</h1>
	<ul>
	<li><a href="/plan9/index.html"><a>Plan 9</a></a></li>
	<li><a href="/plan9/doc/inst/index.html"><a>インストール</a></a></li>
	<li><a href="/plan9/doc/guide/index.html"><a>システムの使い方</a></a></li>
	<li><a href="/plan9/doc/devel/index.html"><a>プログラミング</a></a></li>
	<li><a href="/plan9/doc/adm/index.html"><a>システム管理</a></a></li>
	<li><a href="/plan9/man/index.html"><a>自作ツール集</a></a></li>
	</ul>
</nav>
<main>
	<p class="revision">2006年10月30日更新</p>
	<section>
		<h1>分散システムのインストール</h1>
		<p>Plan 9は、各端末や認証サーバでさえも、
		ファイルサーバをルートファイルシステムとして扱えます。
		ちょっと手間ですし、いくつか認証サーバ構築の時と
		同じ設定をしなければいけませんが、
		一度やってしまえばディスクレス運用も可能になるのでオススメです。</p>
		<p>以下、認証サーバとファイルサーバを切り替えながら構築していきます。
		プロンプトでどちらの作業か分かるように書いていく予定です。</p>
		<pre><code class="console"># 認証サーバ、ホストオーナー
#

# 認証サーバ、一般ユーザ
%

# ファイルサーバ、configモード
config:

# ファイルサーバ、通常モード
fs:</code></pre>
		<section>
			<h2>配布ファイルの展開</h2>
			<p>現状、<a href="https://9p.io/wiki/plan9/Installing_a_Plan_9_File_Server/index.html">Installing a Plan 9 File Server</a>にあるwrap/instコマンドがありません。
			9fansで調べると<a href="http://9fans.net/archive/2003/03/322">problems installing the plan9 distribution on fileserver</a>というのがあったので、それに沿って対応。</p>
			<pre><code class="console">% 9fs sources
% bind /n/sources/plan9 /n/dist
% srv fairy
% mount -c /srv/fairy /n/inst
% cp /n/dist/dist/replica/inst /dist/replica (#instが無かったので作成)
% chmod +x /dist/replica/inst</code></pre>
			<pre><code class="console">fs: create /dist sys sys 775 d
fs: create /dist/replica sys sys 775 d
fs: create /dist/replica/ndist sys sys 775
fs: create /dist/replica/client sys sys 775 d
fs: create /dist/replica/client/plan9.db sys sys 664
fs: create /dist/replica/client/plan9.log sys sys 664 a</code></pre>
			<pre><code class="console">% replica/pull -v /dist/replica/inst</code></pre>
		</section>
		<section>
			<h2>cpu/auth: nvramの設定</h2>
			<p>最初の立ち上げ時に聞かれます。
			自分で呼び出す場合はauth/wrkey。</p>
			<pre><code>authid: bootes
authdom: mana.lufia.org
secstore: xxxxx    # bootesは使わないけど、とりあえず設定
password: zzzzz</code></pre>
		</section>
		<section>
			<h2>ファイルサーバ: cronの準備</h2>
			<pre><code class="console">fs: create /sys/log/cron sys sys 666 a</code></pre>
		</section>
		<section>
			<h2>ファイルサーバ: secstoreの準備</h2>
			<pre><code class="console">fs: create /adm/secstore adm adm 775 d</code></pre>
		</section>
		<section>
			<h2>ファイルサーバ: cpu/authで使うファイルの編集</h2>
			<p>cpu/authからファイルサーバをマウントして作業。
			このあたりは<a href="/plan9/doc/inst/auth.html"><a>認証サーバのインストール</a></a>そのまま。</p>
			<pre><code class="console">% 9fs $fileserver</code></pre>
			<ul>
			<li><strong>/rc/bin/termrc</strong>(# 端末がなければどうでもいい)</li>
			<li><strong>/rc/bin/cpurc</strong></li>
			<li><strong>/adm/timezone/local</strong></li>
			<li><strong>/lib/ndb/local</strong></li>
			<li><strong>/lib/ndb/auth</strong></li>
			<li><strong>/rc/bin/^(service service.auth)</strong># cpurcから変更されるので作業はない</li>
			</ul>
			<p>補足として、secstoreを有効にするために、
			cpurcのauth/cronの次行に、auth/secstoredを追加しています。</p>
		</section>
		<section>
			<h2>ファイルサーバ: /bin/cpurcでmvの行を有効にしたなら</h2>
			<pre><code class="console">fs: newuser sys +bootes</code></pre>
		</section>
		<section>
			<h2>cpu/auth: plan9.iniの設定</h2>
			<pre><code class="console"># 9fat:
# cd /n/9fat
# ramfs
# ed plan9.ini
# unmount /n/9fat</code></pre>
			<p><strong>plan9.ini</strong>の必要なところだけ抜粋。</p>
			<pre><code class="ini">bootfile=sdC0!9fat!9pcauth
bootargs=il -g x.x.x.x ether /net/ether0 y.y.y.y m.m.m.m
fs=z.z.z.z
auth=y.y.y.y</code></pre>
			<p class="note">だいたい分かるかと思われますが、いちおう。</p>
			<dl>
			<div>
				<dt>x.x.x.x</dt>
				<dd>デフォルトゲートウェイ</dd>
			</div>
			<div>
				<dt>y.y.y.y</dt>
				<dd>いま構築している認証サーバ のIPアドレス</dd>
			</div>
			<div>
				<dt>m.m.m.m</dt>
				<dd>y.y.y.yのマスク</dd>
			</div>
			<div>
				<dt>z.z.z.z</dt>
				<dd>ファイルサーバのIPアドレス</dd>
			</div>
			</dl>
		</section>
		<section>
			<h2>cpu/auth: 再起動</h2>
			<pre><code class="console"># fshalt
# ^t ^t r</code></pre>
			<p><strong>/rc/bin/service/^(il566 tcp567)</strong>が無くてエラーになるけど、
			目的はサービスの無効化なので無視</p>
		</section>
		<section>
			<h2>ファイルサーバ: ユーザの作成</h2>
			<pre><code class="console">fs: newuser lufia
fs: newuser adm +bootes</code></pre>
			<p class="note">bootesをadmに所属させない限り、
			auth/changeuserの結果を保存できません。</p>
		</section>
		<section>
			<h2>cpu/auth: ユーザの作成</h2>
			<pre><code class="console"># auth/changeuser -p bootes  (# パスワードはnvramと同じにする)
# auth/changeuser -p lufia</code></pre>
		</section>
		<section>
			<h2>cpu/auth: 認証でadmとsysをはじく</h2>
			<pre><code class="console"># cat &gt;&gt;/lib/ndb/auth
hostid=bootes
    uid=!sys uid=!adm uid=**
^D</code></pre>
		</section>
		<section>
			<h2>cpu/auth: secstoreの設定</h2>
			<pre><code class="console"># auth/secuser -v lufia
# echo &#x27;key proto=p9sk1 dom=mana.lufia.org user=lufia !password=xxxx&#x27; &gt;/mnt/factotum/ctl  (# 最初のdrawterm接続のため)</code></pre>
		</section>
		<section>
			<h2>drawtermで接続テスト</h2>
			<p>secstoreに何も保存されてない場合、
			secstoreパスワードを入力するとエラーになるので、空にしてログインする。</p>
			<pre><code class="console">% drawterm -a wisp -c wisp
user[none]: lufia
password: xxxx
secstore password:</code></pre>
		</section>
		<section>
			<h2>lufiaの環境設定</h2>
			<pre><code class="console">% /sys/lib/newuser</code></pre>
			<p>これで、メールやらなにやらのファイルが作られます。</p>
		</section>
		<section>
			<h2>lufiaのsecstoreに、drawterm他用のアカウントを保存</h2>
			<p>ファイル名をfactotum以外にすると、次回ログイン時に
			secsotreがremote file factotum does not existsとエラーを吐くので注意。</p>
			<pre><code class="console">% ramfs
% cd /tmp
% echo &#x27;key proto=p9sk1 dom=mana.lufia.org user=lufia !password=xxxx&#x27; &gt;factotum
% auth/secstore -p factotum
% rm factotum</code></pre>
			<p>ちなみに、すでにアカウントが保存されている場合はこちら</p>
			<pre><code class="console">% ramfs
% cd /tmp
% auth/secstore -g factotum
% echo &#x27;key proto...&#x27; &gt;&gt;factotum
% auth/secstore -p factotum
% rm factotum</code></pre>
		</section>
		<section>
			<h2>cpu/auth: 再起動して動作確認</h2>
			<pre><code class="console"># fshalt</code></pre>
		</section>
		<section>
			<h2>ファイルサーバ: 後始末</h2>
			<p>drawtermでlufiaがログインできるのを確認してから後始末。
			というのも、(たぶんkeyfsの)停止時に<strong>/adm/keys</strong>に書くため、
			<strong>bootes</strong>に<strong>adm</strong>権が必要だから。</p>
			<pre><code class="console">fs: newuser sys -bootes
fs: newuser adm -bootes</code></pre>
		</section>
	</section>
</main>
<aside>
	<section>
		<h1>関連情報</h1>
		<ul>
		<li><a href="/plan9/doc/inst/fs.html"><a>ファイルサーバのインストール</a></a></li>
		</ul>
	</section>
	<section>
		<h1>参考ページ</h1>
		<ul>
		<li><a href="https://9p.io/wiki/plan9/Installing_a_Plan_9_File_Server/index.html">Installing a Plan 9 File Server</a></li>
		<li><a href="http://p9.nyx.link/install/distrib.html">分散システムの構築</a></li>
		</ul>
	</section>
</aside>
<footer>
	<p>見れない、表示がおかしい場合は、動作環境を添えて<a href="/plan9/doc/inst/mailto:webmaster@lufia.org"><a>webmaster@lufia.org</a></a>まで連絡ください。</p>
</footer>
</div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"html":"\u003c!doctype html\u003e\n\u003chtml lang=\"ja\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003ctitle\u003ePlan 9: 分散システムのインストール\u003c/title\u003e\n\u003cmeta name=\"viewport\" content=\"width=device-width,initial-scale=1\"\u003e\n\u003cmeta name=\"author\" content=\"http://www.hatena.ne.jp/lufiabb/\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cnav\u003e\n\t\u003ch1\u003eメニュー\u003c/h1\u003e\n\t\u003cul\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/index.html\"\u003ePlan 9\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/doc/inst/index.html\"\u003eインストール\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/doc/guide/index.html\"\u003eシステムの使い方\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/doc/devel/index.html\"\u003eプログラミング\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/doc/adm/index.html\"\u003eシステム管理\u003c/a\u003e\u003c/li\u003e\n\t\u003cli\u003e\u003ca href=\"/plan9/man/index.html\"\u003e自作ツール集\u003c/a\u003e\u003c/li\u003e\n\t\u003c/ul\u003e\n\u003c/nav\u003e\n\u003cmain\u003e\n\t\u003cp class=\"revision\"\u003e2006年10月30日更新\u003c/p\u003e\n\t\u003csection\u003e\n\t\t\u003ch1\u003e分散システムのインストール\u003c/h1\u003e\n\t\t\u003cp\u003ePlan 9は、各端末や認証サーバでさえも、\n\t\tファイルサーバをルートファイルシステムとして扱えます。\n\t\tちょっと手間ですし、いくつか認証サーバ構築の時と\n\t\t同じ設定をしなければいけませんが、\n\t\t一度やってしまえばディスクレス運用も可能になるのでオススメです。\u003c/p\u003e\n\t\t\u003cp\u003e以下、認証サーバとファイルサーバを切り替えながら構築していきます。\n\t\tプロンプトでどちらの作業か分かるように書いていく予定です。\u003c/p\u003e\n\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# 認証サーバ、ホストオーナー\n#\n\n# 認証サーバ、一般ユーザ\n%\n\n# ファイルサーバ、configモード\nconfig:\n\n# ファイルサーバ、通常モード\nfs:\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003e配布ファイルの展開\u003c/h2\u003e\n\t\t\t\u003cp\u003e現状、\u003ca href=\"https://9p.io/wiki/plan9/Installing_a_Plan_9_File_Server/index.html\"\u003eInstalling a Plan 9 File Server\u003c/a\u003eにあるwrap/instコマンドがありません。\n\t\t\t9fansで調べると\u003ca href=\"http://9fans.net/archive/2003/03/322\"\u003eproblems installing the plan9 distribution on fileserver\u003c/a\u003eというのがあったので、それに沿って対応。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% 9fs sources\n% bind /n/sources/plan9 /n/dist\n% srv fairy\n% mount -c /srv/fairy /n/inst\n% cp /n/dist/dist/replica/inst /dist/replica (#instが無かったので作成)\n% chmod +x /dist/replica/inst\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: create /dist sys sys 775 d\nfs: create /dist/replica sys sys 775 d\nfs: create /dist/replica/ndist sys sys 775\nfs: create /dist/replica/client sys sys 775 d\nfs: create /dist/replica/client/plan9.db sys sys 664\nfs: create /dist/replica/client/plan9.log sys sys 664 a\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% replica/pull -v /dist/replica/inst\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: nvramの設定\u003c/h2\u003e\n\t\t\t\u003cp\u003e最初の立ち上げ時に聞かれます。\n\t\t\t自分で呼び出す場合はauth/wrkey。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode\u003eauthid: bootes\nauthdom: mana.lufia.org\nsecstore: xxxxx    # bootesは使わないけど、とりあえず設定\npassword: zzzzz\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: cronの準備\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: create /sys/log/cron sys sys 666 a\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: secstoreの準備\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: create /adm/secstore adm adm 775 d\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: cpu/authで使うファイルの編集\u003c/h2\u003e\n\t\t\t\u003cp\u003ecpu/authからファイルサーバをマウントして作業。\n\t\t\tこのあたりは\u003ca href=\"auth.html\"\u003e認証サーバのインストール\u003c/a\u003eそのまま。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% 9fs $fileserver\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cul\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/rc/bin/termrc\u003c/strong\u003e(# 端末がなければどうでもいい)\u003c/li\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/rc/bin/cpurc\u003c/strong\u003e\u003c/li\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/adm/timezone/local\u003c/strong\u003e\u003c/li\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/lib/ndb/local\u003c/strong\u003e\u003c/li\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/lib/ndb/auth\u003c/strong\u003e\u003c/li\u003e\n\t\t\t\u003cli\u003e\u003cstrong\u003e/rc/bin/^(service service.auth)\u003c/strong\u003e# cpurcから変更されるので作業はない\u003c/li\u003e\n\t\t\t\u003c/ul\u003e\n\t\t\t\u003cp\u003e補足として、secstoreを有効にするために、\n\t\t\tcpurcのauth/cronの次行に、auth/secstoredを追加しています。\u003c/p\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: /bin/cpurcでmvの行を有効にしたなら\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: newuser sys +bootes\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: plan9.iniの設定\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# 9fat:\n# cd /n/9fat\n# ramfs\n# ed plan9.ini\n# unmount /n/9fat\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp\u003e\u003cstrong\u003eplan9.ini\u003c/strong\u003eの必要なところだけ抜粋。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"ini\"\u003ebootfile=sdC0!9fat!9pcauth\nbootargs=il -g x.x.x.x ether /net/ether0 y.y.y.y m.m.m.m\nfs=z.z.z.z\nauth=y.y.y.y\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp class=\"note\"\u003eだいたい分かるかと思われますが、いちおう。\u003c/p\u003e\n\t\t\t\u003cdl\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdt\u003ex.x.x.x\u003c/dt\u003e\n\t\t\t\t\u003cdd\u003eデフォルトゲートウェイ\u003c/dd\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdt\u003ey.y.y.y\u003c/dt\u003e\n\t\t\t\t\u003cdd\u003eいま構築している認証サーバ のIPアドレス\u003c/dd\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdt\u003em.m.m.m\u003c/dt\u003e\n\t\t\t\t\u003cdd\u003ey.y.y.yのマスク\u003c/dd\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv\u003e\n\t\t\t\t\u003cdt\u003ez.z.z.z\u003c/dt\u003e\n\t\t\t\t\u003cdd\u003eファイルサーバのIPアドレス\u003c/dd\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003c/dl\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: 再起動\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# fshalt\n# ^t ^t r\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp\u003e\u003cstrong\u003e/rc/bin/service/^(il566 tcp567)\u003c/strong\u003eが無くてエラーになるけど、\n\t\t\t目的はサービスの無効化なので無視\u003c/p\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: ユーザの作成\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: newuser lufia\nfs: newuser adm +bootes\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp class=\"note\"\u003ebootesをadmに所属させない限り、\n\t\t\tauth/changeuserの結果を保存できません。\u003c/p\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: ユーザの作成\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# auth/changeuser -p bootes  (# パスワードはnvramと同じにする)\n# auth/changeuser -p lufia\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: 認証でadmとsysをはじく\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# cat \u0026gt;\u0026gt;/lib/ndb/auth\nhostid=bootes\n    uid=!sys uid=!adm uid=**\n^D\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: secstoreの設定\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# auth/secuser -v lufia\n# echo 'key proto=p9sk1 dom=mana.lufia.org user=lufia !password=xxxx' \u0026gt;/mnt/factotum/ctl  (# 最初のdrawterm接続のため)\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003edrawtermで接続テスト\u003c/h2\u003e\n\t\t\t\u003cp\u003esecstoreに何も保存されてない場合、\n\t\t\tsecstoreパスワードを入力するとエラーになるので、空にしてログインする。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% drawterm -a wisp -c wisp\nuser[none]: lufia\npassword: xxxx\nsecstore password:\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003elufiaの環境設定\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% /sys/lib/newuser\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp\u003eこれで、メールやらなにやらのファイルが作られます。\u003c/p\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003elufiaのsecstoreに、drawterm他用のアカウントを保存\u003c/h2\u003e\n\t\t\t\u003cp\u003eファイル名をfactotum以外にすると、次回ログイン時に\n\t\t\tsecsotreがremote file factotum does not existsとエラーを吐くので注意。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% ramfs\n% cd /tmp\n% echo 'key proto=p9sk1 dom=mana.lufia.org user=lufia !password=xxxx' \u0026gt;factotum\n% auth/secstore -p factotum\n% rm factotum\u003c/code\u003e\u003c/pre\u003e\n\t\t\t\u003cp\u003eちなみに、すでにアカウントが保存されている場合はこちら\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e% ramfs\n% cd /tmp\n% auth/secstore -g factotum\n% echo 'key proto...' \u0026gt;\u0026gt;factotum\n% auth/secstore -p factotum\n% rm factotum\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003ecpu/auth: 再起動して動作確認\u003c/h2\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003e# fshalt\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\t\u003csection\u003e\n\t\t\t\u003ch2\u003eファイルサーバ: 後始末\u003c/h2\u003e\n\t\t\t\u003cp\u003edrawtermでlufiaがログインできるのを確認してから後始末。\n\t\t\tというのも、(たぶんkeyfsの)停止時に\u003cstrong\u003e/adm/keys\u003c/strong\u003eに書くため、\n\t\t\t\u003cstrong\u003ebootes\u003c/strong\u003eに\u003cstrong\u003eadm\u003c/strong\u003e権が必要だから。\u003c/p\u003e\n\t\t\t\u003cpre\u003e\u003ccode class=\"console\"\u003efs: newuser sys -bootes\nfs: newuser adm -bootes\u003c/code\u003e\u003c/pre\u003e\n\t\t\u003c/section\u003e\n\t\u003c/section\u003e\n\u003c/main\u003e\n\u003caside\u003e\n\t\u003csection\u003e\n\t\t\u003ch1\u003e関連情報\u003c/h1\u003e\n\t\t\u003cul\u003e\n\t\t\u003cli\u003e\u003ca href=\"fs.html\"\u003eファイルサーバのインストール\u003c/a\u003e\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/section\u003e\n\t\u003csection\u003e\n\t\t\u003ch1\u003e参考ページ\u003c/h1\u003e\n\t\t\u003cul\u003e\n\t\t\u003cli\u003e\u003ca href=\"https://9p.io/wiki/plan9/Installing_a_Plan_9_File_Server/index.html\"\u003eInstalling a Plan 9 File Server\u003c/a\u003e\u003c/li\u003e\n\t\t\u003cli\u003e\u003ca href=\"http://p9.nyx.link/install/distrib.html\"\u003e分散システムの構築\u003c/a\u003e\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/section\u003e\n\u003c/aside\u003e\n\u003cfooter\u003e\n\t\u003cp\u003e見れない、表示がおかしい場合は、動作環境を添えて\u003ca href=\"mailto:webmaster@lufia.org\"\u003ewebmaster@lufia.org\u003c/a\u003eまで連絡ください。\u003c/p\u003e\n\u003c/footer\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/[[...slug]]","query":{"slug":["plan9","doc","inst","dist"]},"buildId":"uudkrhSA2meQW-38gm1fk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>