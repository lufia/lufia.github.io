{"pageProps":{"html":"<!doctype html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n<title>orange/note: Arch Linuxで最新のAWS CLI v2をインストールする</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<meta name=\"author\" content=\"http://www.hatena.ne.jp/lufiabb/\">\n</head>\n<body>\n<nav>\n\t<h1>メニュー</h1>\n\t<ul>\n\t<li><a href=\"/notes/index.html\">orange/note</a></li>\n\t<li><a href=\"/notes/pc.html\">PC関連</a></li>\n\t<li><a href=\"/notes/web.html\">web製作</a></li>\n\t<li><a href=\"/notes/sec.html\">セキュリティ</a></li>\n\t<li><a href=\"/notes/hobby.html\">本・ゲーム</a></li>\n\t<li><a href=\"/notes/junk.html\">ジャンク</a></li>\n\t</ul>\n</nav>\n<main>\n\t<p class=\"revision\">2022年6月13日作成</p>\n\t<section>\n\t\t<h1>Arch Linuxで最新のAWS CLI v2をインストールする</h1>\n\t\t<p>AWS CloudWatchのログをみるとき、今まではAURの<strong>awslogs</strong>を使っていたけど、\n\t\t6/10頃から<em>pacman -Syu</em>したときに以下のエラーで失敗するようになった。</p>\n\t\t<pre><code class=\"console\">$ sudo pacman -Syu\n:: Synchronizing package databases...\ncore is up to date\nextra is up to date\ncommunity is up to date\n:: Starting full system upgrade...\nresolving dependencies...\nlooking for conflicting packages...\nerror: failed to prepare transaction (could not satisfy dependencies)\n:: installing python-jmespath (1.0.0-1) breaks dependency 'python-jmespath&lt;1.0.0' required by awslogs</code></pre>\n\t\t<p>AWS CLI v2にある<em>aws logs tail</em>コマンドで<strong>awslogs</strong>相当のことが行えるらしいが、\n\t\tArch LinuxのCommunityパッケージにある<strong>aws-cli</strong>はv1で、\n\t\tAURにある<strong>aws-cli-v2</strong>はバージョンが古く、どちらも要件を満たせない。</p>\n\t\t<ul>\n\t\t<li><a href=\"https://www.archlinux.jp/packages/community/any/aws-cli/\">aws-cli</a></li>\n\t\t<li><a href=\"https://aur.archlinux.org/packages/aws-cli-v2\">aws-cli-v2</a></li>\n\t\t</ul>\n\t\t<p>次に、<a href=\"https://dev.classmethod.jp/articles/install-aws-cli-v2-from-sourcecode/\">AWS CLI v2をpipからインストールしてみた</a>を参考に<em>pip</em>で試すと、\n\t\t2022年時点では<strong>botocore</strong>の<strong>v2</strong>ブランチに動きがなく、\n\t\tCのソースファイルをビルドするところでエラーになったので諦めた。</p>\n\t\t<p>仕方がないのでバイナリパッケージを入れる。</p>\n\t\t<pre><code class=\"console\"># 古いコマンドは消しておく\n$ sudo pacman -Rs awslogs aws-cli\n\n$ curl https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip -o awscliv2.zip\n$ unzip awscliv2.zip\n$ ./aws/install -i ~/pkg/aws -b ~/bin</code></pre>\n\t\t<p>これで、Arch Linuxの標準では<strong>~/.local/bin</strong>に<em>aws</em>コマンドがインストールされる。\n\t\tアップデートする場合は、新しいインストーラをダウンロードして<em>install -u</em>するといいらしい。</p>\n\t\t<p>これを調べている時に知ったけど、今は<em>python -mpip</em>とするらしい。\n\t\tまた、GitHubのURLを渡すと直接インストールできる。</p>\n\t\t<pre><code class=\"console\">$ python -m pip install git+https://github.com/aws/aws-cli.git@v2\n\n# アーカイブの場合はこれ\n$ python -m pip install https://github.com/aws/aws-cli/archive/v2.tar.gz</code></pre>\n\t</section>\n</main>\n<aside>\n\t<h1>やっていること</h1>\n\t<ul>\n\t<li><a href=\"/plan9/index.html\">Plan 9</a></li>\n\t<li><a href=\"http://web.me.com/lufia/alefcompiler/alef/\">Alefコンパイラを読む</a></li>\n\t</ul>\n</aside>\n<footer>\n\t<p>見れない、表示がおかしい場合は、動作環境を添えて<a href=\"mailto:webmaster@lufia.org\">webmaster@lufia.org</a>まで連絡ください。</p>\n</footer>\n</body>\n</html>\n"},"__N_SSG":true}