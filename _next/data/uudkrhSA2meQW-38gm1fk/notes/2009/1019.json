{"pageProps":{"html":"<!doctype html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n<title>orange/note: 無線LANのセキュリティ</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<meta name=\"author\" content=\"http://www.hatena.ne.jp/lufiabb/\">\n</head>\n<body>\n<nav>\n\t<h1>メニュー</h1>\n\t<ul>\n\t<li><a href=\"/notes/index.html\">orange/note</a></li>\n\t<li><a href=\"/notes/pc.html\">PC関連</a></li>\n\t<li><a href=\"/notes/web.html\">web製作</a></li>\n\t<li><a href=\"/notes/sec.html\">セキュリティ</a></li>\n\t<li><a href=\"/notes/hobby.html\">本・ゲーム</a></li>\n\t<li><a href=\"/notes/junk.html\">ジャンク</a></li>\n\t</ul>\n</nav>\n<main>\n\t<p class=\"revision\">2009年10月19日作成</p>\n\t<section>\n\t\t<h1>無線LANのセキュリティ</h1>\n\t\t<p class=\"note\">この記事は書きかけです。</p>\n\t\t<section>\n\t\t\t<h2>先に結論を書くと</h2>\n\t\t\t<p>法人なら、しっかり対策すれば普通に安全。\n\t\t\t個人は、現状EvilTwinだけはどうにも対策不可。\n\t\t\tどちらにしても、WPA-AESまたはWPA2-AESでなければ危険。</p>\n\t\t</section>\n\t\t<section>\n\t\t\t<h2>結論は書いたので以下だらだらと</h2>\n\t\t\t<p>SSIDステルス、ANY拒否、MACアドレス認証などなど。\n\t\t\t要素が多すぎて混乱してきたので、まとめました。\n\t\t\tまずは、一般的な事柄、続けて無線LANの要素を書きます。</p>\n\t\t</section>\n\t\t<section>\n\t\t\t<h2>セキュリティの3大要素</h2>\n\t\t\t<p>一般的にセキュリティの要素は以下3つの要素に分類できます。</p>\n\t\t\t<ul>\n\t\t\t<li>盗聴(機密性)</li>\n\t\t\t<li>改ざん(整合性、完全性)</li>\n\t\t\t<li>なりすまし</li>\n\t\t\t</ul>\n\t\t\t<p>これ以外にも可用性などが含まれていることもありますが、\n\t\t\t今回は無視します。以下詳細。</p>\n\t\t\t<section>\n\t\t\t\t<h3>盗聴とその対策</h3>\n\t\t\t\t<p>第三者がデータの内容を読み取れてしまうこと。\n\t\t\t\tユーザを認証して適切なアクセス権を割り当てたり、\n\t\t\t\tデータを暗号化して通信することで対策。</p>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>改ざんとその対策</h3>\n\t\t\t\t<p>第三者がデータを書き換えてしまうこと。\n\t\t\t\tデータの暗号化、データの認証で対策。\n\t\t\t\tどちらかというと、改ざんを防止するのではなく、\n\t\t\t\t改ざんされたことを検出する技術。メッセージダイジェスト。</p>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>なりすましとその対策</h3>\n\t\t\t\t<p>第三者が他人になりかわること。例えば振込み詐欺。\n\t\t\t\tユーザ認証により本人確認したり、\n\t\t\t\t認証局(CA)から保証してもらったりする(デジタル署名)。</p>\n\t\t\t\t<p>ただし現状、<strong>個人でデジタル署名は取得できない</strong>。</p>\n\t\t\t</section>\n\t\t</section>\n\t\t<section>\n\t\t\t<h2>無線LANのセキュリティ技術</h2>\n\t\t\t<p>これらをふまえて、無線LANの\n\t\t\tセキュリティ技術を挙げていきます。\n\t\t\t以下、無線LANアクセスポイントを親機、\n\t\t\t無線LANクライアントを子機と書きます。</p>\n\t\t\t<p>ではまず簡単なものから。</p>\n\t\t\t<section>\n\t\t\t\t<h3>ANY接続の拒否</h3>\n\t\t\t\t<p>ANY接続とは、クライアントのSSIDを\n\t\t\t\t特殊な意味を持つID「ANY」にすると、\n\t\t\t\tどんなSSIDの親機とでも接続できる、という便利な機能です。\n\t\t\t\t扱いはワイルドカードに似ています。\n\t\t\t\tで、ANY拒否というのは、SSIDがANYの子機からの接続を\n\t\t\t\t拒否する機能のこと。拒否しておいて損は無いかと。</p>\n\t\t\t\t<p>これが、次のSSIDステルスと\n\t\t\t\t混同して書かれている場合があるのでややこしい。\n\t\t\t\t機能としても同じ扱いの機種もあるようです。</p>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>SSIDステルス</h3>\n\t\t\t\t<p>SSIDを、アクセスポイント一覧から見えなくする機能。\n\t\t\t\t一覧に表示されなくなり、手動でSSIDを設定しないと繋がらないので、\n\t\t\t\tSSIDを知らないと繋がらないように思いがちですが、\n\t\t\t\t通信内容にはSSIDが平文で含まれているので気休め程度。\n\t\t\t\t信用しないほうが賢明です。</p>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>MACアドレスフィルタリング</h3>\n\t\t\t\t<p>「MACアドレスは機器ごとに異なる」という特徴を利用した認証。\n\t\t\t\t子機のMACアドレスを事前に親機へ登録しておいて、\n\t\t\t\t登録のないMACアドレスからのアクセスを拒否する機能。\n\t\t\t\tですが、MACアドレス自体は簡単に書き換えできるに加えて、\n\t\t\t\t無線通信を暗号化していても、暗号化されるのはデータ部だけで\n\t\t\t\tMACアドレスは平文で流れるので、効果のほどは微妙。</p>\n\t\t\t\t<p>ちなみに、MACアドレスを偽装することを、\n\t\t\t\t「MACアドレススプーフィング」と呼ぶらしいです。</p>\n\t\t\t\t<p>SSIDステルスとMACアドレスフィルタリングについては、\n\t\t\t\tTECH WORLDの<a href=\"http://www.techworld.jp/topics/utm/11264/2/\">あなたの知らない無線LANの恐怖</a>\n\t\t\t\tが詳しいです。</p>\n\t\t\t\t<p>無線LAN(802.11)のフレームフォーマットについては以下2つ。</p>\n\t\t\t\t<ul>\n\t\t\t\t<li><a href=\"http://lantech.up.seesaa.net/subpage/IEEE80211MacFrame.html\">MACフレームの種類と用途</a></li>\n\t\t\t\t<li><a href=\"http://itpro.nikkeibp.co.jp/members/NBY/Security/20040410/4/\">データフレームフォーマット</a></li>\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>WEP/WPA/WPA2</h3>\n\t\t\t\t<p>認証と暗号化規格のセット。\n\t\t\t\tWPA2が現状最も優秀。WEPは危険。WPAはその中間。\n\t\t\t\tとは言っても、WPAとWPA2は、認証と暗号に\n\t\t\t\t以下のどれを選ぶかによって変わる。\n\t\t\t\tWEPは、WEP128も使ってはいけないので無視します。</p>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>認証の種類</h3>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>オープンシステム認証</h4>\n\t\t\t\t\t<p>認証とは言っていますが、認証しないことと等しい。</p>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>PSK(事前共有鍵)</h4>\n\t\t\t\t\t<p>共通パスワードにより認証する。\n\t\t\t\t\tパーソナルモードとも呼ぶらしい。</p>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>EAP(拡張可能認証プロトコル)</h4>\n\t\t\t\t\t<p><a href=\"http://itpro.nikkeibp.co.jp/article/COLUMN/20061010/250248/?ST=nettech&amp;P=2\">IEEE802.1X</a>で認証する。\n\t\t\t\t\tエンタープライズモードとも呼ぶ。\n\t\t\t\t\t拡張可能なだけあって、多すぎなので名前だけ。\n\t\t\t\t\t親機と子機が相互に認証しあうので、\n\t\t\t\t\t使えるならEAP-TLSが最良。</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t<li>EAP</li>\n\t\t\t\t\t<li>EAP-MD5</li>\n\t\t\t\t\t<li>EAP-TTLS</li>\n\t\t\t\t\t<li>EAP-PEAP</li>\n\t\t\t\t\t<li>EAP-TLS</li>\n\t\t\t\t\t<li>LEAP(ASLEAPというツールでクラック可能らしい)</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>暗号化の種類</h3>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>WEP</h4>\n\t\t\t\t\t<p>暗号化してないようなもの。使ってはいけない。</p>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>TKIP</h4>\n\t\t\t\t\t<p>2009年8月、<a href=\"http://gigazine.net/index.php?/news/comments/20090805_attack_on_wpa/\">無線LANのWPAをわずか数秒から数十秒で突破する新しい攻撃方法が登場</a>しました。\n\t\t\t\t\tタイトルはWPAが破られたようにみえますが、\n\t\t\t\t\t破られたのはTKIPです。WPA-AESはまだ大丈夫。</p>\n\t\t\t\t</section>\n\t\t\t\t<section>\n\t\t\t\t\t<h4>AES</h4>\n\t\t\t\t\t<p>今のところ問題なし。</p>\n\t\t\t\t</section>\n\t\t\t\t<p>WPA-AESとWPA2-AESは、\n\t\t\t\t暗号化アルゴリズムが同じなので、同じものです。\n\t\t\t\t違いは、WPAでは暗号化セットにAESを含まなくてもいいのですが、\n\t\t\t\tWPA2では必ず含まなければWPA2対応を名乗れません。</p>\n\t\t\t</section>\n\t\t</section>\n\t\t<section>\n\t\t\t<h2>結局どれを使えばいいのか</h2>\n\t\t\t<p>ANY拒否にして、WEP以外の規格をAESで使っていれば、\n\t\t\t親機については、それほど問題は無いんじゃないかと思っています。\n\t\t\tただし、問題はここから先。子機から親機の認証について。</p>\n\t\t\t<p>IEEE802.11では、モバイル環境も考慮してなのか、\n\t\t\tより電波の強い親機に接続しようとします。\n\t\t\t具体的に言えば、現在接続しているSSIDと同じSSIDを持つ親機のうち、\n\t\t\tもっとも電波の強いものにアクセスします。</p>\n\t\t\t<p>ここで重要な点は2つ。</p>\n\t\t\t<ul>\n\t\t\t<li>SSIDは隠したところでフレームに含まれるので、誰でも見られる</li>\n\t\t\t<li>MACアドレスは書き換えられるので、親機のMACを登録したところで無意味</li>\n\t\t\t</ul>\n\t\t\t<p>以下書きかけ。</p>\n\t\t\t<pre><code>=EvilTwin(Wiフィッシング)\nなりすまし対策は、ユーザ認証かCAお墨付き証明書なのですが、\n子機が親機を認証するなんてできないので、証明書を使って\n子機から親機を認証するしかありません。なのでEAPの、\n相互に証明書を使って認証するEAP-TLS</code></pre>\n\t\t\t<pre><code>http://www.atmarkit.co.jp/fnetwork/tokusyuu/19wlan/01.html</code></pre>\n\t\t\t<pre><code>=本人(アクセスポイント)の確認は？なりすましAP対策\n*[http://www.geocities.jp/hibiyank/ver3/sekyu/sekuwi.htm]\n*[WiFishing|http://www.nikkeibp.co.jp/sj/2/column/u/03/]\nEvilTwinとも言う。</code></pre>\n\t\t\t<pre><code>IEEE802.1xで証明書を交換し、相互に認証しあうしかない？</code></pre>\n\t\t\t<pre><code>でも、この安全性は、証明書がVeriSign等の証明機関から発行されているかを基準にしている気がする。\nでは家庭で使っている無線LANはどうすればいいんだろう。危険な情報は入力するなってのは馬鹿な話。\n狙われやすいのはHotSpotってだけで、原理的にはどの無線APでも可能なわけだし。\n狙われない程度に安全ってのは、たとえ家庭用ってのを差し引いても\nhttp://itpro.nikkeibp.co.jp/article/COLUMN/20060914/248050/</code></pre>\n\t\t</section>\n\t</section>\n</main>\n<aside>\n\t<h1>関連情報</h1>\n\t<ul>\n\t<li><a href=\"../2011/0712.html\">無線LANのセキュリティ2</a></li>\n\t</ul>\n</aside>\n<aside>\n\t<h1>やっていること</h1>\n\t<ul>\n\t<li><a href=\"/plan9/index.html\">Plan 9</a></li>\n\t<li><a href=\"http://web.me.com/lufia/alefcompiler/alef/\">Alefコンパイラを読む</a></li>\n\t</ul>\n</aside>\n<footer>\n\t<p>見れない、表示がおかしい場合は、動作環境を添えて<a href=\"mailto:webmaster@lufia.org\">webmaster@lufia.org</a>まで連絡ください。</p>\n</footer>\n</body>\n</html>\n"},"__N_SSG":true}