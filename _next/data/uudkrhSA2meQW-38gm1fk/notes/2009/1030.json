{"pageProps":{"html":"<!doctype html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n<title>orange/note: Disqus解除</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<meta name=\"author\" content=\"http://www.hatena.ne.jp/lufiabb/\">\n</head>\n<body>\n<nav>\n\t<h1>メニュー</h1>\n\t<ul>\n\t<li><a href=\"/notes/index.html\">orange/note</a></li>\n\t<li><a href=\"/notes/pc.html\">PC関連</a></li>\n\t<li><a href=\"/notes/web.html\">web製作</a></li>\n\t<li><a href=\"/notes/sec.html\">セキュリティ</a></li>\n\t<li><a href=\"/notes/hobby.html\">本・ゲーム</a></li>\n\t<li><a href=\"/notes/junk.html\">ジャンク</a></li>\n\t</ul>\n</nav>\n<main>\n\t<p class=\"revision\">2009年10月30日作成</p>\n\t<section>\n\t\t<h1>Disqus解除</h1>\n\t\t<p>Disqusというサービスを一時的に使っていましたが、\n\t\t好みのレイアウトにするのが意外と大変ということと、\n\t\tページの読み込みがもっさりするという理由で外しました。</p>\n\t\t<p>とりあえず使い方のメモだけでも残しておきます。\n\t\tHTMLには一切手を入れず、JavaScriptだけで\n\t\t必要なタグを追加するようにしています。</p>\n\t\t<p>以下jQueryに依存していますので、HTMLのヘッダで取り込んでおいて。</p>\n\t\t<pre><code class=\"html\">&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;</code></pre>\n\t\t<p>まず中心となる関数から。</p>\n\t\t<pre><code class=\"js\">function disqus(sname)\n{\n\tvar name = encodeURIComponent(sname)\n\t$('footer').after('&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;')\n\tvar disqus = 'http://disqus.com/forums/'+name\n\tvar q = ''\n\t$('a[href$=#disqus_thread]').each(function(i, a){\n\t\tq += '&amp;url'+i+'=' + encodeURIComponent(a.href)\n\t})\n\tvar url = disqus + '/get_num_replies.js?' + q.substring(1)\n\t$('head').append('&lt;script src=&quot;'+url+'&quot;&gt;&lt;/script&gt;')\n\tdisqus_no_style = 1\n\t$('head').append('&lt;script src=&quot;'+disqus+'/embed.js'+'&quot;&gt;&lt;/script&gt;')\n}</code></pre>\n\t\t<p>使うときは、少々手間ですが4行ほど書きます。</p>\n\t\t<pre><code class=\"js\">disqus_url = location.href\nif(disqus_url.search(/\\/$/) &gt;= 0)\n\tdisqus_url += 'index.html'\ndisqus('shortname')</code></pre>\n\t\t<p>これは、Disqusは通常window.locationをキーとして扱いますが、\n\t\tこのときindex.htmlのあるなしで別のページとして扱われてしまいます。\n\t\tそれでは困りますので、調整しているわけですね。</p>\n\t\t<p class=\"note\">細かいことを気にすれば、/path/#idstring等も考えられますが、\n\t\t使っていませんでしたので気にしていません。</p>\n\t</section>\n</main>\n<aside>\n\t<h1>やっていること</h1>\n\t<ul>\n\t<li><a href=\"/plan9/index.html\">Plan 9</a></li>\n\t<li><a href=\"http://web.me.com/lufia/alefcompiler/alef/\">Alefコンパイラを読む</a></li>\n\t</ul>\n</aside>\n<footer>\n\t<p>見れない、表示がおかしい場合は、動作環境を添えて<a href=\"mailto:webmaster@lufia.org\">webmaster@lufia.org</a>まで連絡ください。</p>\n</footer>\n</body>\n</html>\n"},"__N_SSG":true}