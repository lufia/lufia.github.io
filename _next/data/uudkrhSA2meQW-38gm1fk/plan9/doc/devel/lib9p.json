{"pageProps":{"html":"<!doctype html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n<title>Plan 9: lib9p tips</title>\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<meta name=\"author\" content=\"http://www.hatena.ne.jp/lufiabb/\">\n</head>\n<body>\n<nav>\n\t<h1>メニュー</h1>\n\t<ul>\n\t<li><a href=\"/plan9/index.html\">Plan 9</a></li>\n\t<li><a href=\"/plan9/doc/inst/index.html\">インストール</a></li>\n\t<li><a href=\"/plan9/doc/guide/index.html\">システムの使い方</a></li>\n\t<li><a href=\"/plan9/doc/devel/index.html\">プログラミング</a></li>\n\t<li><a href=\"/plan9/doc/adm/index.html\">システム管理</a></li>\n\t<li><a href=\"/plan9/man/index.html\">自作ツール集</a></li>\n\t</ul>\n</nav>\n<main>\n\t<p class=\"revision\">2004年11月7日更新</p>\n\t<section>\n\t\t<h1>lib9p tips</h1>\n\t\t<section>\n\t\t\t<h2>トラブルシューティング</h2>\n\t\t\t<section>\n\t\t\t\t<h3>walk in non-directory</h3>\n\t\t\t\t<p>((mode&amp;DMDIR) != 0)なのに、cdできない場合。\n\t\t\t\t忘れがちですが、attachでは以下2つのqidをセットすること。</p>\n\t\t\t\t<ul class=\"c\">\n\t\t\t\t<li>r-&gt;fid-&gt;qid</li>\n\t\t\t\t<li>r-&gt;ofcall.qid</li>\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h3>printでsuicide</h3>\n\t\t\t\t<p>9pライブラリを使うとき、%D, %Fはライブラリから\n\t\t\t\tすでに使われているので、それ以外で選ばなければいけない。\n\t\t\t\tスタックトレースを取ったときに、\n\t\t\t\tutflenで落ちる場合はそれかもしれない。\n\t\t\t\t例えば以下のような。</p>\n\t\t\t\t<pre><code class=\"console\">acid: stk()\nutflen(s=0xfefefefe)+0xf /sys/src/libc/port/utflen.c:13\nfmtstrcpy(f=0x4f194,s=0xfefefefe)+0xa9 /sys/src/libc/fmt/dofmt.c:251\n_strfmt(f=0x4f194)+0x1d /sys/src/libc/fmt/dofmt.c:261\n_fmtdispatch(isrunes=0x0,f=0x4f194,fmt=0x30590)+0x94 /sys/src/libc/fmt/fmt.c:196\ndofmt(fmt=0x3058e,f=0x4f194)+0x75 /sys/src/libc/fmt/dofmt.c:62\nvseprint(e=0x4f308,buf=0x4f268,args=0x4f1f8,fmt=0x3057e)+0x5d /sys/src/libc/fmt/vseprint.c:20\nseprint(fmt=0x3057e,buf=0x4f268,e=0x4f308)+0x2b /sys/src/libc/fmt/seprint.c:13\nfdirconv(d=0x4f4fc,buf=0x4f268,e=0x4f308)+0xaa /sys/src/libc/9sys/fcallfmt.c:181\ndirfmt(fmt=0x4f480)+0x32 /sys/src/libc/9sys/fcallfmt.c:173\n_fmtdispatch(isrunes=0x0,f=0x4f480,fmt=0x32d3b)+0x94 /sys/src/libc/fmt/fmt.c:196\ndofmt(fmt=0x32d39,f=0x4f480)+0x75 /sys/src/libc/fmt/dofmt.c:62\nvfprint(fd=0x2,args=0x4f4dc,fmt=0x32d30)+0x59 /sys/src/libc/fmt/vfprint.c:30\nfprint(fmt=0x32d30,fd=0x2)+0x23 /sys/src/libc/fmt/fprint.c:13\nnsproc()+0x5f7 /sys/src/cmd/msnfs/proto.c:338\nlauncher386(arg=0x0,f=0x262b)+0x10 /sys/src/libthread/386.c:10</code></pre>\n\t\t\t</section>\n\t\t</section>\n\t</section>\n</main>\n<aside>\n\t<h1>関連情報</h1>\n\t<ul>\n\t<li><a href=\"https://9p.io/magic/man2html/2/9p\">9p(2)</a></li>\n\t</ul>\n</aside>\n<footer>\n\t<p>見れない、表示がおかしい場合は、動作環境を添えて<a href=\"mailto:webmaster@lufia.org\">webmaster@lufia.org</a>まで連絡ください。</p>\n</footer>\n</body>\n</html>\n"},"__N_SSG":true}