<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<script>
document.createElement('article')
document.createElement('aside')
document.createElement('footer')
document.createElement('header')
document.createElement('nav')
document.createElement('section')
</script>
<style>
article, aside, footer, header, nav, section { display: block }
</style>
<title>Plan 9: html5 generator</title>
<script src="/lib/jquery.js"></script>
<script src="/lib/decor.js"></script>
<script src="/plan9/lib/complex.js"></script>
<link rel="stylesheet" type="text/css" href="/plan9/lib/u.css">
<meta name="author" content="http://www.hatena.ne.jp/lufiabb/">
</head>
<body>
<header>
		<h1><a href="/plan9/">Plan 9</a></h1>
</header>
<nav>
	<section>
		<h1>メニュー</h1>
		<ul>
		<li><a href="/plan9/doc/inst/">インストール</a></li>
		<li><a href="/plan9/doc/guide/">システムの使い方</a></li>
		<li><a href="/plan9/doc/devel/">プログラミング</a></li>
		<li><a href="/plan9/doc/adm/">システム管理</a></li>
		<li><a href="/plan9/man/">自作ツール集</a></li>
		</ul>
	</section>
</nav>
<article>
	<section>
		<h1>wf</h1>
		<section>
			<h2>SYNOPSIS</h2>
			<pre>wf [-dp] [-l lang] [-x x1 x2] [file]</pre>
		</section>
		<section>
			<h2>DESCRIPTION</h2>
			<p>wikiのような記述から、HTMLを生成します。
			使用できる文字は以下の通り。</p>
			<dl>
			<dt>= item</dt>
			<dd>hN</dd>
			<dt>+ item</dt>
			<dd>ol</dd>
			<dt>* item</dt>
			<dd>ul</dd>
			<dt>: item</dt>
			<dd>dt</dd>
			<dt>- item</dt>
			<dd>dd</dd>
			<dt>&gt; item</dt>
			<dd>blockquote</dd>
			<dt>! string</dt>
			<dd>pre</dd>
			<dt>\ item</dt>
			<dd>p</dd>
			<dt>| item item ...</dt>
			<dd>table</dd>
			</dl>
			<p>上記以外であればpになります。
			また、itemでは、以下の文字が使えます。</p>
			<dl>
			<dt>* item *</dt>
			<dd>strong</dd>
			<dt>[ url ]</dt>
			<dt>[ item | url ]</dt>
			<dd>a</dd>
			<dt>&lt; url &gt;</dt>
			<dt>&lt; item | url &gt;</dt>
			<dd>img</dd>
			</dl>
			<p>これらをただの文字として扱う場合は、**のように2つ続けて書きます。</p>
			<p>urlについては、acmeで使いやすくするために、
			変なプリフィックスルールがあります。
			オプションで</p>
			<pre>wf -x w html</pre>
			<p>とすると、urlの末尾が.wであれば.htmlに書き換えて出力します。
			これは複数あってもかまわないので、</p>
			<pre>wf -x w html -x pic png</pre>
			<p>のようにできます。</p>
		</section>
		<section>
			<h2>テーブル</h2>
			<p>テーブルは、タブで区切ったセルをtdとして生成します。
			タブは1つ以上であってもまとめて扱うので、
			表が見やすいように整形してもかまいません。
			また、thを使いたい場合は、セル全体を*(strong)でくくってください。
			例えば以下の場合、1行目はすべてthセルになります。</p>
			<pre>|*name*		*value*
|maxht		20
|width		70</pre>
		</section>
		<section>
			<h2>ヘッダ</h2>
			<p>ヘッダは、%で開始します。
			これはファイルの先頭にのみ可能です。</p>
			<pre>% name string</pre>
			<p>nameは、title, tag, script, style, feed, urlが組み込まれており、
			title, styleなど、必要な要素を生成します。
			上記以外の名前は&lt;meta name=&quot;$name&quot; content=&quot;$string&quot;&gt;と
			なります。</p>
			<p>同じ名前が複数回あらわれた場合、
			それらは連結して1つの要素となります。</p>
			<p>このうち、urlは特殊な扱いになっていて、
			これだけではHTMLを生成することはありませんが、
			[ url ]タイプのリンクについて、
			正規表現置換を行いURLを設定します。
			たとえばurlを使い、簡易な表記でPlan 9マニュアルに
			リンクを張る場合は以下のように書きます。</p>
			<pre>%url s|^([a-z0-9]+)\(([1-9])\)$|/magic/man2html/\2/\1|
*[man(1)]
*[regexp(2)]
*[fsconfig(4)|http://www.domain.dom]</pre>
			<p>この3つ目のリンクは、正規表現置換を行いません。
			また、xオプションのルールで変換したものに対して適用します。</p>
			<p>urlが複数現れた場合、書かれた順に評価していき、
			マッチするものがあればそこで終了します。</p>
		</section>
		<section>
			<h2>ブロック化</h2>
			<p>同じ行頭文字が続いた場合は、
			以前の行とまとめて1つのブロック(block)となります。
			途中で区切りたい場合は、空行を置いてください。</p>
			<p>ブロックも、同じレベルに属するブロックをまとめようとします。
			セクションの項も参照。</p>
			<p>また、明示的にブロックを作成する場合は、
			以下の方法があります。</p>
			<pre>{
	blocks
}</pre>
			<p>これは、blocksをdivで囲みます。
			{}の中ではインデントが1つ増えますが、
			新しいセクションが開始されるわけではありません。
			セクションも含む場合は2つ以上インデントしてください。</p>
		</section>
		<section>
			<h2>IDとクラス</h2>
			<p>ブロックの前に、置くことができます。
			続くブロックを生成するときに、必要な属性を追加します。</p>
			<dl>
			<dt>. name</dt>
			<dd>class</dd>
			<dt># name</dt>
			<dd>id</dd>
			</dl>
			<p>classは、複数並べることが可能です。</p>
			<pre>.name1
.name2
aaa
bbb</pre>
			<p>その場合、class=&quot;name1 name2&quot;のようになります。</p>
		</section>
		<section>
			<h2>クラスの要素化</h2>
			<p>特別なルールとして、class=&quot;nav&quot;をもつブロックは、
			親セクションのnav要素として書き出します。
			要素化されたクラス属性は取り除かれます。</p>
			<p>navの他に、header, footer, asideもあります。
			特別なクラスが同時に設定された場合、
			優先順位は高い順にnav, header, footer, asideです。</p>
		</section>
		<section>
			<h2>セクション</h2>
			<p>インデントすれば、その部分をsectionで囲みます。
			もちろんhNは、sectionに追従して、h1, h2 ...と増加します。</p>
			<pre>block
	blocks2</pre>
		</section>
		<section>
			<h2>EXAMPLE</h2>
			<pre>%title Plan 9
%url s|^([a-z0-9]+)\(([1-9])\)$|http://plan9.bell-labs.com/magic/man2html/\2/\1|
%url s|^(contrib/[^ 	]+)$|http://plan9.bell-labs.com/sources/\1|
%title html5 generator

=wf

	=SYNOPSIS
	!wf [-dp] [-l lang] [-x x1 x2] [file]

	=DESCRIPTION

	wikiのような記述から、HTMLを生成します。
	使用できる文字は以下の通り。

	:= item
	-hN
	:+ item
	-ol
	:** item
	-ul</pre>
		</section>
		<section>
			<h2>BUGS</h2>
			<p>クラスやIDは、セクションや=(Hn)には適用できません。
			明示的に{}を書いてください。</p>
		</section>
	</section>
</article>
<footer>
	<p>見れない、表示がおかしい場合は、動作環境を添えて<a href="mailto:webmaster@lufia.org">webmaster@lufia.org</a>まで連絡ください。</p>
</footer>
</body>
</html>
